// Auto-generated â€” do not edit. Source: deferred/deferred-script.ts
export const DEFERRED_SCRIPT = "\"use strict\";(()=>{function L(t,a,i,s){let o=!1;if(i===\"html\"){let e=document.querySelectorAll(`[data-pantolingo-deferred=\"${t}\"]`);for(let n=0;n<e.length;n++)e[n].innerHTML=a,e[n].classList.remove(\"pantolingo-deferred-loading\"),e[n].removeAttribute(\"data-pantolingo-deferred\"),o=!0}else if(i===\"text\"){let e=document.createTreeWalker(document.body,NodeFilter.SHOW_COMMENT,{acceptNode:d=>d.data===`pantolingo-deferred:${t}`?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),n=[],r;for(;r=e.nextNode();)n.push(r);for(let d of n){let m=d.nextSibling;if(m&&m.nodeType===Node.TEXT_NODE){let u=m.data,T=u.match(/^(\\s*)/)?.[1]||\"\",h=u.match(/(\\s*)$/)?.[1]||\"\";m.data=T+a+h;let f=m.parentElement;f?.classList.contains(\"pantolingo-deferred-loading\")&&(f.classList.remove(\"pantolingo-deferred-loading\"),f.removeAttribute(\"data-pantolingo-deferred\")),d.remove(),o=!0}}let c=document.querySelectorAll(`[data-pantolingo-deferred=\"${t}\"]:not(title)`);for(let d=0;d<c.length;d++)c[d].classList.remove(\"pantolingo-deferred-loading\"),c[d].removeAttribute(\"data-pantolingo-deferred\"),o=!0;let l=document.querySelector(`title[data-pantolingo-deferred=\"${t}\"]`);l&&(l.textContent=a,l.removeAttribute(\"data-pantolingo-deferred\"),o=!0)}else if(i===\"attr\"&&s){let e=document.querySelectorAll(`[data-pantolingo-deferred=\"${t}\"][data-pantolingo-deferred-attr=\"${s}\"]`);for(let n=0;n<e.length;n++)e[n].setAttribute(s,a),e[n].removeAttribute(\"data-pantolingo-deferred\"),e[n].removeAttribute(\"data-pantolingo-deferred-attr\"),o=!0}return o}function p(t){let{hash:a,kind:i,attr:s}=t;if(i===\"html\"){let o=document.querySelectorAll(`[data-pantolingo-deferred=\"${a}\"]`);for(let e=0;e<o.length;e++)o[e].classList.remove(\"pantolingo-deferred-loading\"),o[e].removeAttribute(\"data-pantolingo-deferred\")}else if(i===\"text\"){let o=document.createTreeWalker(document.body,NodeFilter.SHOW_COMMENT,{acceptNode:l=>l.data===`pantolingo-deferred:${a}`?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),e=[],n;for(;n=o.nextNode();)e.push(n);for(let l of e){let d=l.parentElement;d?.classList.contains(\"pantolingo-deferred-loading\")&&(d.classList.remove(\"pantolingo-deferred-loading\"),d.removeAttribute(\"data-pantolingo-deferred\")),l.remove()}let r=document.querySelectorAll(`[data-pantolingo-deferred=\"${a}\"]:not(title)`);for(let l=0;l<r.length;l++)r[l].classList.remove(\"pantolingo-deferred-loading\"),r[l].removeAttribute(\"data-pantolingo-deferred\");let c=document.querySelector(`title[data-pantolingo-deferred=\"${a}\"]`);c&&c.removeAttribute(\"data-pantolingo-deferred\")}else if(i===\"attr\"&&s){let o=document.querySelectorAll(`[data-pantolingo-deferred=\"${a}\"][data-pantolingo-deferred-attr=\"${s}\"]`);for(let e=0;e<o.length;e++)o[e].removeAttribute(\"data-pantolingo-deferred\"),o[e].removeAttribute(\"data-pantolingo-deferred-attr\")}}function A(){let t=document.querySelectorAll(\".pantolingo-deferred-loading\");for(let a=0;a<t.length;a++)t[a].classList.remove(\"pantolingo-deferred-loading\"),t[a].removeAttribute(\"data-pantolingo-deferred\")}async function g(t,a,i){if(t.length===0||Date.now()-a>=12e3){for(let s of t)p(s);A();return}try{let s={segments:t.map(r=>({hash:r.hash,kind:r.kind,content:r.content,...r.attr?{attr:r.attr}:{}}))},o=await fetch(\"/__pantolingo/translate\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`HTTP ${o.status}`);let e=await o.json(),n=[];for(let r of t){let c=e[r.hash];c!==void 0?L(r.hash,c,r.kind,r.attr)||p(r):n.push(r)}if(n.length>0){let c=t.length-n.length===0?i+250:i;setTimeout(()=>{g(n,a,c)},c)}else A()}catch(s){console.error(\"[Pantolingo] Polling error:\",s),setTimeout(()=>{g(t,a,i)},i)}}function E(){let t=window.__PANTOLINGO_DEFERRED__;!t||t.length===0||setTimeout(()=>{g([...t],Date.now(),1500)},1e3)}document.readyState===\"loading\"?document.addEventListener(\"DOMContentLoaded\",E):E();})();"
